<sly data-sly-use.newsModel="ca.sunlife.web.cms.core.models.v1.CNWNewsModel" />
<sly data-sly-use.templates="core/wcm/components/commons/v1/templates.html"/>
<sly data-sly-call="${templates.placeholder @ isEmpty = !text}"></sly>

<div data-sly-test = "${newsModel.newsType == '1'}">
    <div class="list-group  ${newsModel.spacing}">
        <div class="news-article" data-sly-repeat.releaseObj="${newsModel.releaseMain.releases.release}">
        <div class="list-group-item list-group-item-action">
          <p class="releaseDate">${releaseObj.releaseDate}</p> 
          <a class="h5 content" x-cq-linkchecker="skip" href="${newsModel.newsArticleShortenedUrl}${releaseObj.headlineUrl}/${releaseObj.id}/">${releaseObj.headline @ context = 'html'}</a>
        </div>
      </div>
    </div>
</div>


<sly data-sly-test = "${newsModel.newsType == '2'}">
    <div data-panelcontainer="${wcmmode.edit && 'tabs'}"
     id="${newsModel.id}"
     class="cmp-tabs sl-tabs ${newsModel.spacing}"
     data-cmp-is="tabs">	 
        <div class="stack-tab-container no-border">
            <div data-sly-set.items="${newsModel.yearsToShow}"
            data-sly-test="${items && items.size > 0}"
            data-sly-list.tab="${items}"
            class="cmp-tabs__tablist flex-row tabs-cluster without-scroll  nav nav-tabs" 
            aria-multiselectable="false"
            role="tablist">   
            <sly data-sly-test.isActive="${tab == newsModel.activeYear}"/>
            <div class="cmp-tabs__tab${isActive ? ' cmp-tabs__tab--active' : ''} nav-item ${isActive ? ' active focused' : 'in-active'}"
                    tabindex="${isActive ? '0' : '-1'}"
                    data-cmp-hook-tabs="tab"
                    >
                    <a role="tab" tabindex="${isActive ? '0' : '-1'}" id="default-tab-tab-${tab}" aria-controls="default-tab-tabpane-${tab}" aria-selected="${isActive ? 'true': 'false'}" class="with-border nav-link ${isActive ? ' active' : ''}" href="javascript:void(0);">
                        ${tab}
                    </a>
            </div>		   
            </div>		
        </div>
        <div class="tab-content">
            <div  data-sly-set.items="${newsModel.yearsToShow}"
                data-sly-test="${items && items.size > 0}"
                data-sly-repeat.yearsTab="${items}"
                id="${yearsTab}"
                role="tabpanel"
                aria-labelledby="${yearsTab}-tab"
                tabindex="0"
                class="cmp-tabs__tabpanel${yearsTab == newsModel.activeYear ? ' cmp-tabs__tabpanel--active' : ''}"
                data-cmp-hook-tabs="tabpanel">
                <sly data-sly-test="${yearsTab}"/>
					<sly data-sly-test.newsList="${newsModel.news.releaseMain.releases.release}" />
                    <div class="option-box no-margin news-option-table">
						<sly data-sly-test ="${newsList}" data-sly-list.news="${newsList}">
                            <div class="list-group">
                                <div class="news-article">
                                    <div class="list-group-item list-group-item-action">
                                        <p class="releaseDate">${news.releaseDate}</p> 
                                        <a class="h5 content" x-cq-linkchecker="skip" href="${newsModel.newsArticleShortenedUrl}${news.headlineUrl}/${news.id}/">${news.headline @ context='html'}</a>
                                        ${news.summary @ context='html'}
                                    </div>
                                </div>
                            </div>
						</sly>
                    </div>
					<sly data-sly-test = "${!newsList}">
						<div class="news-article">
							<p>${newsModel.noNewsMessage @ context='html'}</p>
						</div>
					</sly>
                    <sly data-sly-test.paginationObj="${newsModel.news.pagination}" />
                    <sly data-sly-test.isPaginationrequired="${paginationObj.totalPages}" />
                    <div class="pagination-component" data-sly-test="${isPaginationrequired}">
                        <sly data-sly-test.previousCss="${paginationObj.curPage == 1 ? 'disabled' : ''}" />
                        <sly data-sly-test.nextCss="${paginationObj.curPage == paginationObj.totalPages ? 'disabled' : ''}" />
                        <sly data-sly-test.firstPageCss="${paginationObj.curPage == 1 ? 'active' : ''}" />
                        <div class="sl-pagination" aria-label="pagination">
                            <ul class="sl-basic-pagination">
                                <!-- <sly data-sly-test="${paginationObj.curPage > 1}"> -->
                                    <li class="sl-pagination-item disabled">
                                        <a x-cq-linkchecker="skip" href="${newsModel.requestURL}${paginationObj.prevPage}/">
                                            <span class="fal fa-chevron-left sl-icon sl-icon_size_sm"></span>
                                            <span class="visually-hidden">${newsModel.previousText}</span>
                                        </a>
                                    </li>
                                <!-- </sly> -->
                                <li class="sl-pagination-item selected-item">
                                    <a x-cq-linkchecker="skip" href="${newsModel.requestURL}1/" aria-current="page">1<span class="visually-hidden">Page 1</span></a>
                                </li>
                                <sly data-sly-list.pageItems="${paginationObj.pageItems}">
                                <li data-sly-test="${!pageItems.ellipsis}" class="sl-pagination-item ${paginationObj.curPage == pageItems.index ? 'active' : ''}">
                                    <a x-cq-linkchecker="skip" href="${pageItems.href}/">${pageItems.index}<span class="visually-hidden">Go to page ${pageItems.index}</span></a>
                                </li>
                                </sly>
                                <li data-sly-test = "${pageItems.ellipsis}" class="sl-pagination-item ellipsis">
                                    <div>...</div>
                                </li>
                                <sly data-sly-test="${paginationObj.curPage < paginationObj.totalPages}">
                                    <li class="sl-pagination-item">
                                        <a x-cq-linkchecker="skip" href="${newsModel.requestURL}${paginationObj.nextPageNo}/">
                                            <span class="fal fa-chevron-right sl-icon sl-icon_size_sm"></span>
                                            <span class="visually-hidden">${newsModel.nextText}</span>
                                        </a>
                                    </li>
                                </sly>
                            </ul>
                        </div>
                    </div>
                </div>                
            </div>
        </div>
    </div>
</sly>
