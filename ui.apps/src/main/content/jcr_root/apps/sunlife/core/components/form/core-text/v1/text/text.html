<div data-sly-use.text="com.adobe.cq.wcm.core.components.models.form.Text"
     data-sly-use.customText="ca.sunlife.web.cms.core.models.v1.FormTextModel"
     data-sly-use.iconTemplate="sunlife/core/components/templates/icon.html" 
     data-cmp-is="formText"
     class="form-field-container ${text.type == 'textarea' ? 'sl-text-area' : 'sl-text-field'} ${text.readOnly ? 'disabled': ''} form-floating ${customText.icon ? (customText.iconPosition ? 'icon-after' : 'icon-before'): ''} ${text.spacing}"
     data-cmp-constraint-message="${text.constraintMessage}"
     data-section="${text.analyticsId}"
     data-cmp-required-message="${text.requiredMessage}">
    <label for="${text.id}" class="sr-only" data-sly-test="${text.hideTitle}">${text.title}</label>
    <textarea data-sly-test.useTextarea="${text.type == 'textarea'}"
        data-cmp-hook-form-text="input"
        id="${text.id}"
        placeholder="${text.placeholder && text.helpMessage}"
        data-parsley-error-message="${customText.requiredMessage}"
        data-parsley-pattern="${customText.validation}"
        data-parsley-id="4"
        maxlength="500"
        name="${text.name}"
        disabled="${text.readOnly}"
        required="${text.required}"
        class="form-control ${text.required ? 'required': ''}"
        data-parsley-required="${text.required}"
        rows="${text.rows}">${text.value}</textarea>
    <input data-sly-test="${!useTextarea}"
        class="form-control ${text.required ? 'required': ''}"
        data-cmp-hook-form-text="input"
        type="${text.type}"
        id="${text.id}"
        placeholder="${text.placeholder}"
        data-parsley-error-message="${customText.validationError}"
        data-parsley-required-message="${customText.requiredMessage}"
        data-parsley-pattern="${customText.validation}"
        data-parsley-pattern-message="${customText.validationError}"
        data-parsley-id="4"
        maxlength="500"
        name="${text.name}"
        value="${text.value}"
        disabled="${text.readOnly}"
        required="${text.required}"
        data-parsley-required="${text.required}"/>
    <span data-sly-test="${useTextarea}" class="visually-hidden" aria-live="polite"><span class="count">0</span> out of 500 characters inputted</span>
    <div data-sly-test="${!useTextarea && customText.icon}" class="icon-container">
        <sly data-sly-call="${iconTemplate.view @ buttonObj=customText}" />
    </div>
    <label for="${text.id}" class="${text.readOnly ? 'disabled': ''}" data-sly-test="${text.title && !text.hideTitle}">${text.title}<span data-sly-test="${useTextarea}" class="visually-hidden"></span>
    </label>
    <div data-sly-test="${!text.placeholder && text.helpMessage}" id="hint-msg-helper-text" class="sl-helper-text hint-text sl-textfield-helper-text">
        ${text.helpMessage}
    </div>
    <p data-sly-test="${useTextarea}" class="character-count ${text.readOnly ? 'disabled': ''}"><span class="count">0</span>/500</p>
    <div data-sly-test="${text.required && !useTextarea}" class="sl-helper-text error-text sl-textfield-helper-text">
        <i class="icon-class far fa-exclamation-triangle" role="presentation"></i>
        ${text.requiredMessage}
    </div>     
</div>
<div data-sly-test="${text.required && useTextarea}" class="form-floating-error">
    <div class="form-floating sl-helper-text error-text sl-textfield-helper-text">
        <i class="icon-class far fa-exclamation-triangle" role="presentation"></i>
        ${text.requiredMessage}
    </div>
</div>