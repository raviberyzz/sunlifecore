"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}!function(){var e,t,n,r,a,o,i,s,l,c,u,m="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)},f=(a=1e3,o=[],i=function(){e&&setInterval(function(){s().then(l).then(c).catch(function(e){/*return console.error("err",e)*/})},a)},s=function(){return new Promise(function(t,n){try{var r=(0,e.threadManager)().active_thread;t(r?r():null)}catch(e){console.error("error",e),n(e)}})},l=function(e){return new Promise(function(a,i){try{if(e){var s=e.participants,l=s?s():null;o=l.toLowerCase().split(",").map(function(e){return e.trim()}),n=o.length>0?o.indexOf("sunshine"):null,-1!==n,r=t.ui.document.getElementsByClassName("agent-col");var c="undefined"!==m(r[0])?r[0].getElementsByClassName("agents more"):null;return a({agents:"undefined"!==m(c[0])?c[0].getElementsByClassName("agent agent-multiple"):null,participantsList:"undefined"!==m(c[0])?c[0].getElementsByClassName("participants"):null})}return a({agents:[],participantsList:[]})}catch(e){console.error("error: ",e)}})},c=function(e){return new Promise(function(t,a){try{var i=e.agents,s=e.participantsList;if(i.length>1&&"undefined"!==m(i[0])){var l,c=i.length-1,u=r[0]?r[0].getElementsByClassName("agents more"):null,f=o.slice(0).reverse(),d=[];if(d=d.slice.call(i,0),n===c&&(d=d.reverse()),d[c].classList.value="agent avatars",l=d[c],Object.keys(i).map(function(e){"undefined"!==m(i[e])&&i[e].remove()}),u){var v=u[0].getElementsByClassName("agent");v&&Object.keys(v).map(function(e,t){v[t]&&v[t].remove()}),u[0].insertBefore(l,u[0].childNodes[0])}return s[0].innerHTML=f[0],s[0].classList.value="participants",t(!1)}return t(!1)}catch(e){return console.error("error: ",e),a(e)}})},{init:function(n,r,o){o&&(a=o),r&&(t=r),n&&(e=n,i())}}),d=null,v=(navigator&&navigator.userAgent||"").toLowerCase(),p=(navigator&&navigator.vendor||"").toLowerCase(),y=null!==(/google inc/.test(p)?v.match(/(?:chrome|crios)\/(\d+)/):null),g=null!==v.match(/version\/(\d+).+?safari/);window.acquire=window.acquire||[];var h=function(){var e=document.createElement("script");e.src="https://s.acquire.io/a-0f505/init.js?full",e.async=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)};y||g?"complete"===document.readyState?h():window.addEventListener?window.addEventListener("load",h,!1):window.attachEvent&&window.attachEvent("onload",h):console.info("Browser not supported.");var w=function(){var e=acquireIO.ui.document.getElementsByClassName("wrapper-table-row full messages tagove-scroll")[0],t=e.getElementsByClassName("clearFix");null!=d&&(clearTimeout(d),d=null),d=setTimeout(function(){var n=function(e,t,n){var r=n||[],a='<div class="anim message">';if(a+='<div class="details"><span class="datetime">Timed Out</span></div>',a+='<div class="msg tgv-block agent obj isFirst isLast"><p>'+e,r.length){a+='<div class="objective-container1">';for(var o=0;o<r.length;o++)a+='<a class="objective-link1"><span>'+r[o]+"</span></a>";a+="</div>"}return a+='</p></div></div><div class="clearfix"></div>'}("We haven't heard from you in a while. Is there anything else I can help you with?"),r=t[t.length-1];r?r.insertAdjacentHTML("afterend",n):e.insertAdjacentHTML("afterbegin",n),e.scrollTop=e.scrollHeight},18e4)};acquire.push(function(e){f.init(e,acquireIO);var t=setInterval(function(){(u=e.ui.document.getElementsByClassName("message-input")[0])&&(clearInterval(t),function t(){var n=u.getElementsByTagName("textarea")[0];u=null,w(),n.addEventListener("keyup",function(n){if(13===n.keyCode)var r=setInterval(function(){(u=e.ui.document.getElementsByClassName("message-input")[0])&&(clearInterval(r),t())},1e3);w()})}())},1e3)})}();